# セル拡張(画像縮小)における数式のための考察

## THETA
### 射影方法
- 立体射影方式
	- HPより参照
		> [THETA HP](https://theta360.com/ja/promotion/?rp=b)

	- 立体射影 参考URL
		> [射影別角度図](http://fit-movingeye.jp/products/optics/consumer_optics/fi_series/fi_02.html)
		> [射影別レンズと視円錐](http://www.persfreaks.jp/main/aov/fisheye/)
		> [射影方式の違い](http://tin0.blog.fc2.com/blog-entry-49.html)
		> [地図図法解説](http://www.math.sci.hiroshima-u.ac.jp/~tamaru/files/09kirino.pdf)


## 考察うんぬん
- THETAの射影方法は立体射影
	- 立体射影によってTHETA内部における魚眼画像を作り出すことは可能
		- では、その時の球立体の形はどうなっているのか
		- これは単純に魚眼レンズに写っている形がそのままでている？

- 円筒図法について
	- 単なる図面展開であって球体から直線が伸びるわけではない
	- 円筒の高さは半球体の円周に相当する

- 平面展開された画像(パノラマ画像)の形式はエクイレクタングラー形式と呼ばれる
- エクイレクタングラーは日本語で正距円筒図法
- 直交座標を使用して球体にマッピング

### パノラマ画像の作成手順
- 単純な考え方
	1. 魚眼レンズから立体射影で画像取得
	2. 立体射影画像から三次元形状の復元
	3. 正距円筒図法によって平面展開

- サイト資料
	> [パノラマ画像とTHETAS画像の変換](http://poipoides.hatenablog.com/entry/2015/12/16/121348)

	1. THETA S 画像取得
	2. 立体射影で平面描画
	3. 立体射影を正射影に変換
	4. 正射影から緯度経度による球体構築
	5. 正距円筒図法によって平面展開

### 資料作成用まとめ
1. THETA S 画像取得
	- 公式サイトに画角が載っていないため、画角がわからないが焦点距離はわかる
	- レンズ性能 : F2.0

2. 立体射影(数学的には写像:滑らかかつ全単射、等角射影である)
	> [立体射影解説](http://mixedmoss.com/NonEuclidianGeometry/SphereModel/chapter2/2.stereoprojection.pdf)

3. 立体射影 -　正射影変換 (上記変換サイト参照)

4. 正射影から緯度経度による三次元形状 (上記変換サイト参照)

5. 正距円筒図法によって平面展開
	- 単純に緯度経度(ラジアン)に球体の半径をかけることでxy座標が求まる
	- 円筒の高さはπrとなり、これは半球体の円周に相当することから中心から直線を伸ばした交点を求めているのではなく、球体を切り開いているという考え方に近いと言える
	- 円筒底面の円周は球体の円周と等しい(2πr)

- よって歪みが生まれるタイミングは正距円筒図法が最もであるが、もともと魚眼レンズを使っているため画像取得時にも多少の歪みが生まれていると考えられる